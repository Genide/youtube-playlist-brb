(this["webpackJsonpyoutube-playlist-brb"]=this["webpackJsonpyoutube-playlist-brb"]||[]).push([[0],{34:function(e){e.exports=JSON.parse('{"apiKey":"AIzaSyCSYXi5SwmlMoPUwPi3UfEciupRruwBksc","playlistId":"","loadingText":"BE RIGHT BACK!"}')},56:function(e,t,n){e.exports=n.p+"static/media/SMPTE_Color_Bars.bba5813e.svg"},64:function(e,t,n){e.exports=n(89)},69:function(e,t,n){},71:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(7),l=n.n(i),o=(n(69),n(11)),s=n.n(o),u=n(20),c=n(12),d=n(13),p=n(16),h=n(17),y=(n(71),n(41)),v=function(){function e(t){Object(c.a)(this,e),this._apiKey=void 0,this._apiKey=t}return Object(d.a)(e,[{key:"GetPlaylistVideos",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a="";case 2:return e.next=4,this._getPlaylistVideoPage(t,a);case 4:if(!(i=e.sent).error){e.next=7;break}throw new Error(i.error.message);case 7:n.push.apply(n,Object(y.a)(i.items)),a=null!==(r=i.nextPageToken)&&void 0!==r?r:"";case 9:if(""!==a){e.next=2;break}case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetPlaylistVideoIds",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.GetPlaylistVideos(t);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){var t,n;return null!==(t=null===(n=e.contentDetails)||void 0===n?void 0:n.videoId)&&void 0!==t?t:""})).filter((function(e){return""!==e})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPlaylistVideoPage",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new URL("https://www.googleapis.com/youtube/v3/playlistItems")).searchParams.append("part","contentDetails"),a.searchParams.append("playlistId",t),a.searchParams.append("key",this._apiKey),a.searchParams.append("maxResults","50"),n&&a.searchParams.append("pageToken",n),e.next=8,fetch(a.href,{headers:{Accept:"application/json"}});case 8:return r=e.sent,e.next=11,r.json();case 11:return i=e.sent,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),f=n(34);function m(e){for(var t,n,a=e.length,r=Object(y.a)(e);0!==a;)n=Math.floor(Math.random()*a),t=r[a-=1],r[a]=r[n],r[n]=t;return r}var b=n(57),g=n(120),x=n(121),w=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(n,[{key:"render",value:function(){return this.props.playlist&&this.props.playlist.snippet?r.a.createElement("div",{style:{display:"flex",flexGrow:1,padding:"1em"}},r.a.createElement("div",null,r.a.createElement("img",{src:this.props.playlist.snippet.thumbnails.default.url,alt:"thumbnail"})),r.a.createElement("div",{style:{paddingLeft:"1em"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Playlist Title"),r.a.createElement("td",null,this.props.playlist.snippet.title)),r.a.createElement("tr",null,r.a.createElement("th",null,"Channel Name"),r.a.createElement("td",null,this.props.playlist.snippet.channelTitle)),r.a.createElement("tr",null,r.a.createElement("th",null,"Playlist Description"),r.a.createElement("td",null,this.props.playlist.snippet.description)))))):r.a.createElement(a.Fragment,null)}}]),n}(a.Component),I=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(n,[{key:"getYTList",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URL("https://www.googleapis.com/youtube/v3/playlists")).searchParams.append("part","snippet"),n.searchParams.append("id",t),n.searchParams.append("key",this.props.YoutubeApiKey),e.next=6,fetch(n.href,{headers:{Accept:"application/json"}});case 6:return a=e.sent,e.next=9,a.json();case 9:return r=e.sent,i=r.items.find((function(e){return e.id===t})),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{display:"flex",padding:"1em"}},r.a.createElement(b.a,{initialValues:{youtubeListId:"",loadingText:"BE RIGHT BACK!"},validate:function(){var t=Object(u.a)(s.a.mark((function t(n){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},n.youtubeListId){t.next=5;break}a.youtubeListId="Required",t.next=10;break;case 5:return t.next=7,e.getYTList(n.youtubeListId);case 7:(r=t.sent)||(a.youtubeListId="Invalid playlist ID"),e.setState({currentPlaylist:r});case 10:return t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onSubmit:function(t,n){var a=n.setSubmitting;e.props.onSubmit(t),a(!1)},validateOnChange:!1},(function(e){var t,n;return r.a.createElement("form",{onSubmit:e.handleSubmit,style:{borderStyle:"groove",borderWidth:"5px",padding:"1em",width:"25%",minWidth:"500px"}},r.a.createElement(g.a,{label:"Youtube Playlist ID",value:e.values.youtubeListId,onChange:e.handleChange,onBlur:e.handleBlur,name:"youtubeListId",error:!!e.errors.youtubeListId,helperText:null!==(t=e.errors.youtubeListId)&&void 0!==t?t:"Enter a youtube playlist ID",fullWidth:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g.a,{label:"Loading Text",value:e.values.loadingText,onChange:e.handleChange,onBlur:e.handleBlur,name:"loadingText",error:!!e.errors.loadingText,helperText:null!==(n=e.errors.loadingText)&&void 0!==n?n:"Displayed while loading the next video in the playlist",fullWidth:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{type:"submit",disabled:e.isSubmitting},"Create Link"))})),r.a.createElement(w,{playlist:this.state.currentPlaylist}))}}]),n}(a.Component);I.defaultProps={onSubmit:function(){}};var E=n(53),P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;Object(c.a)(this,e),this._context=void 0,this._oscillator=void 0,this._gain=void 0,this._beepVolume=void 0,this._beepVolume=t,this._context=new AudioContext,this._oscillator=this._context.createOscillator(),this._oscillator.frequency.value=1e3,this._gain=this._context.createGain(),this._oscillator.connect(this._gain),this._gain.connect(this._context.destination),this._gain.gain.value=0,this._oscillator.start(0)}return Object(d.a)(e,[{key:"Beep",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;this.StartBeep(),setTimeout((function(){e.StopBeep()}),t)}},{key:"StartBeep",value:function(){this._gain.gain.value=this._beepVolume}},{key:"StopBeep",value:function(){this._gain.gain.value=0}}]),e}(),k=n(58),_=n(56),j=n.n(_),V=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{style:Object(k.a)({},{width:"100%",height:"100%"},{display:this.props.hidden?"none":"flex"})},r.a.createElement("img",{src:j.a,alt:"",style:{width:"100%"}}),r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",fontSize:"150px",color:"white",transform:"translate(-50%,-50%)",backgroundColor:"black",textAlign:"center"}},this.props.text))}}]),n}(a.Component);V.defaultProps={hidden:!1,text:""};var O=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={currentVideoId:"",IsVideoPlaying:!1,IsLoadingVideo:!0},a._beeper=void 0,a._currentVideoIndex=void 0,a._beeper=new P(.1),a._currentVideoIndex=0,a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.loadCurrentPlaylistVideo()}},{key:"onPlayerStart",value:function(){this.setState({IsVideoPlaying:!0,IsLoadingVideo:!1}),this._beeper.StopBeep()}},{key:"loadNextPlaylistVideo",value:function(){this._currentVideoIndex++,this.loadCurrentPlaylistVideo()}},{key:"loadCurrentPlaylistVideo",value:function(){var e={IsVideoPlaying:!1,IsLoadingVideo:!1,currentVideoId:""};this._currentVideoIndex<this.props.playlist.length&&(e.currentVideoId=this.props.playlist[this._currentVideoIndex],e.IsLoadingVideo=!0,this._beeper.StartBeep()),this.setState(e)}},{key:"render",value:function(){var e=this;if(0===this.props.playlist.length)return r.a.createElement(a.Fragment,null);return r.a.createElement("div",{style:{height:"inherit"}},r.a.createElement("div",{hidden:!this.state.IsVideoPlaying,style:{height:"inherit"}},r.a.createElement(E.a,{containerClassName:"YTPlayerContainer",videoId:this.state.currentVideoId,opts:{height:"100%",width:"100%",playerVars:{autoplay:1,controls:0,fs:0,rel:0,modestbranding:1}},onPlay:function(){return e.onPlayerStart()},onEnd:function(){return e.loadNextPlaylistVideo()},onStateChange:function(e){console.log(e.data)}})),r.a.createElement(V,{hidden:!this.state.IsLoadingVideo,text:this.props.loadingText}))}}]),n}(a.Component);O.defaultProps={playlist:[],loadingText:""};var S=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a,r,i,l,o;Object(c.a)(this,n),(o=t.call(this,e)).state={currentVideoId:"",IsVideoPlaying:!1,IsLoadingVideo:!0,LoadingText:"",playlist:[]},o._playlistRetriever=void 0,o._playlistId=void 0,o._playlistRetriever=new v(f.apiKey);var s=new URL(window.location.href);return o._playlistId=null!==(a=null!==(r=s.searchParams.get("list"))&&void 0!==r?r:f.playlistId)&&void 0!==a?a:"",o.state.LoadingText=null!==(i=null!==(l=s.searchParams.get("loadingText"))&&void 0!==l?l:f.loadingText)&&void 0!==i?i:"",o}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.onMount()}},{key:"onMount",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._playlistId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._playlistRetriever.GetPlaylistVideoIds(this._playlistId);case 5:t=e.sent,this.setState({playlist:m(t)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"onConfigFormSubmit",value:function(e){console.log(e);var t=new URL(window.location.href);t.searchParams.append("list",e.youtubeListId),t.searchParams.append("loadingText",e.loadingText);var n=t.href;navigator.clipboard.writeText(n),alert("The link has been copied to your clipboard. Redirecting you to your new page."),window.location.href=t.href}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{height:"inherit"}},this.state.playlist.length>0?r.a.createElement(O,{playlist:this.state.playlist}):r.a.createElement(I,{YoutubeApiKey:f.apiKey,onSubmit:function(t){return e.onConfigFormSubmit(t)}}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.378c53af.chunk.js.map