(this["webpackJsonpyoutube-playlist-brb"]=this["webpackJsonpyoutube-playlist-brb"]||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),l=a.n(i),s=(a(85),a(60)),o=(a(86),a(71)),u=a(15),c=a.n(u),d=a(22),p=a(70),h=a(138),m=a(140),y=a(139),b=a(137),v=a(18),f=a(19),g=a(26),x=a(28),E=function(e){Object(x.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(f.a)(a,[{key:"render",value:function(){return this.props.playlist&&this.props.playlist.snippet?r.a.createElement("div",{style:{display:"flex",flexGrow:1,padding:"1em"}},r.a.createElement("div",null,r.a.createElement("img",{src:this.props.playlist.snippet.thumbnails.default.url,alt:"thumbnail"})),r.a.createElement("div",{style:{paddingLeft:"1em"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Playlist Title"),r.a.createElement("td",null,this.props.playlist.snippet.title)),r.a.createElement("tr",null,r.a.createElement("th",null,"Channel Name"),r.a.createElement("td",null,this.props.playlist.snippet.channelTitle)),r.a.createElement("tr",null,r.a.createElement("th",null,"Playlist Description"),r.a.createElement("td",null,this.props.playlist.snippet.description)))))):r.a.createElement(n.Fragment,null)}}]),a}(n.Component),w=a(49);function I(e){for(var t,a,n=e.length,r=Object(w.a)(e);0!==n;)a=Math.floor(Math.random()*n),t=r[n-=1],r[n]=r[a],r[a]=t;return r}function O(e,t){return k.apply(this,arguments)}function k(){return(k=Object(d.a)(c.a.mark((function e(t,a){var n,r,i,l,s,o,u=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]&&u[2],r=new URL("https://www.googleapis.com/youtube/v3/playlists"),i="id",n&&(i+=",snippet"),r.searchParams.append("part",i),r.searchParams.append("id",t),r.searchParams.append("key",a),e.next=9,fetch(r.href,{headers:{Accept:"application/json"}});case 9:return l=e.sent,e.next=12,l.json();case 12:return s=e.sent,o=s.items.find((function(e){return e.id===t})),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=a(10),_=function(){var e=Object(d.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,a,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function j(e){var t=e.YoutubeApiKey,a=Object(n.useState)({}),i=Object(o.a)(a,2),l=i[0],s=i[1],u=Object(P.g)();return r.a.createElement("div",{style:{display:"flex",padding:"1em"}},r.a.createElement(p.a,{initialValues:{youtubeListId:"",loadingText:"BE RIGHT BACK!",showYTControls:!1,randomizeOrder:!0},validate:function(){var e=Object(d.a)(c.a.mark((function e(a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},a.youtubeListId){e.next=5;break}n.youtubeListId="Required",e.next=9;break;case 5:return e.next=7,_(a.youtubeListId,t);case 7:(r=e.sent)?s(r):n.youtubeListId="Invalid playlist ID";case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSubmit:function(e,t){var a=t.setSubmitting,n=new URLSearchParams;n.append("list",e.youtubeListId),n.append("loadingText",e.loadingText),n.append("showYTControls",e.showYTControls?"1":"0"),n.append("randomizeOrder",e.randomizeOrder?"1":"0"),u.push("/BRB/?".concat(n.toString())),a(!1)},validateOnChange:!1},(function(e){var t,a;return r.a.createElement("form",{onSubmit:e.handleSubmit,style:{borderStyle:"groove",borderWidth:"5px",padding:"1em",width:"25%",minWidth:"500px"}},r.a.createElement(h.a,{label:"Youtube Playlist ID",value:e.values.youtubeListId,onChange:e.handleChange,onBlur:e.handleBlur,name:"youtubeListId",error:!!e.errors.youtubeListId,helperText:null!==(t=e.errors.youtubeListId)&&void 0!==t?t:"Enter a youtube playlist ID",fullWidth:!0,disabled:e.isSubmitting}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(h.a,{label:"Loading Text",value:e.values.loadingText,onChange:e.handleChange,onBlur:e.handleBlur,name:"loadingText",error:!!e.errors.loadingText,helperText:null!==(a=e.errors.loadingText)&&void 0!==a?a:"Displayed while loading the next video in the playlist",fullWidth:!0,disabled:e.isSubmitting}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(m.a,{label:"Show Youtube Controls",control:r.a.createElement(y.a,{checked:e.values.showYTControls,onChange:e.handleChange,onBlur:e.handleBlur,name:"showYTControls",disabled:e.isSubmitting})}),r.a.createElement(m.a,{label:"Randomize playlist order",control:r.a.createElement(y.a,{checked:e.values.randomizeOrder,onChange:e.handleChange,onBlur:e.handleBlur,name:"randomizeOrder",disabled:e.isSubmitting})}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(b.a,{type:"submit",variant:"outlined",disabled:e.isSubmitting},"Create Link"))})),r.a.createElement(E,{playlist:l}))}var C=a(52),T=function(){function e(t){Object(v.a)(this,e),this._apiKey=void 0,this._apiKey=t}return Object(f.a)(e,[{key:"GetPlaylistVideos",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var a,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n="";case 2:return e.next=4,this._getPlaylistVideoPage(t,n);case 4:if(!(i=e.sent).error){e.next=7;break}throw new Error(i.error.message);case 7:a.push.apply(a,Object(w.a)(i.items)),n=null!==(r=i.nextPageToken)&&void 0!==r?r:"";case 9:if(""!==n){e.next=2;break}case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetPlaylistVideoIds",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.GetPlaylistVideos(t);case 2:return a=e.sent,e.abrupt("return",a.map((function(e){var t,a;return null!==(t=null===(a=e.contentDetails)||void 0===a?void 0:a.videoId)&&void 0!==t?t:""})).filter((function(e){return""!==e})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPlaylistVideoPage",value:function(){var e=Object(d.a)(c.a.mark((function e(t,a){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URL("https://www.googleapis.com/youtube/v3/playlistItems")).searchParams.append("part","contentDetails"),n.searchParams.append("playlistId",t),n.searchParams.append("key",this._apiKey),n.searchParams.append("maxResults","50"),a&&n.searchParams.append("pageToken",a),e.next=8,fetch(n.href,{headers:{Accept:"application/json"}});case 8:return r=e.sent,e.next=11,r.json();case 11:return i=e.sent,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),V=a(66),S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;Object(v.a)(this,e),this._context=void 0,this._oscillator=void 0,this._gain=void 0,this._beepVolume=void 0,this._beepVolume=t,this._context=new AudioContext,this._oscillator=this._context.createOscillator(),this._oscillator.frequency.value=1e3,this._gain=this._context.createGain(),this._oscillator.connect(this._gain),this._gain.connect(this._context.destination),this._gain.gain.value=0,this._oscillator.start(0)}return Object(f.a)(e,[{key:"Beep",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;this.StartBeep(),setTimeout((function(){e.StopBeep()}),t)}},{key:"StartBeep",value:function(){this._gain.gain.value=this._beepVolume}},{key:"StopBeep",value:function(){this._gain.gain.value=0}}]),e}(),B=a(72),L=a(69),Y=a.n(L),A=function(e){Object(x.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:Object(B.a)({},{width:"100%",height:"100%"},{display:this.props.hidden?"none":"flex"})},r.a.createElement("img",{src:Y.a,alt:"",style:{width:"100%"}}),r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",fontSize:"150px",color:"white",transform:"translate(-50%,-50%)",backgroundColor:"black",textAlign:"center"}},this.props.text))}}]),a}(n.Component);A.defaultProps={hidden:!1,text:""};var z=function(e){Object(x.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={currentVideoId:"",IsVideoPlaying:!1,IsLoadingVideo:!0},n._beeper=void 0,n._currentVideoIndex=void 0,n._beeper=new S(.1),n._currentVideoIndex=0,n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.loadCurrentPlaylistVideo()}},{key:"onPlayerStart",value:function(){this.setState({IsVideoPlaying:!0,IsLoadingVideo:!1}),this._beeper.StopBeep()}},{key:"loadNextPlaylistVideo",value:function(){this._currentVideoIndex++,this.loadCurrentPlaylistVideo()}},{key:"loadCurrentPlaylistVideo",value:function(){var e={IsVideoPlaying:!1,IsLoadingVideo:!1,currentVideoId:""};this._currentVideoIndex<this.props.playlist.length&&(e.currentVideoId=this.props.playlist[this._currentVideoIndex],e.IsLoadingVideo=!0,this._beeper.StartBeep()),this.setState(e)}},{key:"render",value:function(){var e=this;if(0===this.props.playlist.length)return r.a.createElement(n.Fragment,null);var t={height:"100%",width:"100%",playerVars:{autoplay:1,controls:this.props.showYTControls?1:0,fs:0,rel:0,modestbranding:1}};return r.a.createElement("div",{style:{height:"inherit"}},r.a.createElement("div",{hidden:!this.state.IsVideoPlaying,style:{height:"inherit"}},r.a.createElement(V.a,{containerClassName:"YTPlayerContainer",videoId:this.state.currentVideoId,opts:t,onPlay:function(){return e.onPlayerStart()},onEnd:function(){return e.loadNextPlaylistVideo()}})),r.a.createElement(A,{hidden:!this.state.IsLoadingVideo,text:this.props.loadingText}))}}]),a}(n.Component);z.defaultProps={playlist:[],loadingText:"",showYTControls:!1};var R=function(e){Object(x.a)(a,e);var t=Object(g.a)(a);function a(e){var n,r,i;Object(v.a)(this,a),(i=t.call(this,e)).state={playlistId:"",playlist:[],loadingText:"",showYTControls:!1,randomizeOrder:!0},i._playlistRetriever=void 0,i._playlistRetriever=new T(e.YoutubeApiKey);var l=new URL(window.location.href);return i.state.playlistId=null!==(n=l.searchParams.get("list"))&&void 0!==n?n:"",i.state.loadingText=null!==(r=l.searchParams.get("loadingText"))&&void 0!==r?r:"",i.state.showYTControls="1"===l.searchParams.get("showYTControls"),i.state.randomizeOrder="1"===l.searchParams.get("randomizeOrder"),i}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.onMount()}},{key:"onMount",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.playlistId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,O(this.state.playlistId,this.props.YoutubeApiKey);case 4:if(e.sent){e.next=8;break}return this.setState({playlistId:"",playlist:[]}),e.abrupt("return");case 8:return e.prev=8,e.next=11,this._playlistRetriever.GetPlaylistVideoIds(this.state.playlistId);case 11:t=e.sent,this.state.randomizeOrder&&(t=I(t)),this.setState({playlist:t}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),console.error(e.t0);case 19:case"end":return e.stop()}}),e,this,[[8,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.playlist.length>0?r.a.createElement(z,{playlist:this.state.playlist,loadingText:this.state.loadingText,showYTControls:this.state.showYTControls}):""}}]),a}(n.Component),D=null!=="AIzaSyA0Qv78ZM4HhEleQnbHfKdcq7WGAiEHJDY"?"AIzaSyA0Qv78ZM4HhEleQnbHfKdcq7WGAiEHJDY":"";function K(e){return Object(s.a)(e),r.a.createElement(C.a,{basename:"/youtube-playlist-brb"},r.a.createElement(P.d,null,r.a.createElement(P.b,{path:"/brb"},r.a.createElement(R,{YoutubeApiKey:D})),r.a.createElement(P.b,{path:"/config"},r.a.createElement(j,{YoutubeApiKey:D})),r.a.createElement(P.b,null,r.a.createElement(P.a,{to:"/config"}))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},69:function(e,t,a){e.exports=a.p+"static/media/SMPTE_Color_Bars.bba5813e.svg"},80:function(e,t,a){e.exports=a(105)},85:function(e,t,a){},86:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.f1945f6e.chunk.js.map