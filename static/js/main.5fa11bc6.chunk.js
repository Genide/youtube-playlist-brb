(this["webpackJsonpyoutube-playlist-brb"]=this["webpackJsonpyoutube-playlist-brb"]||[]).push([[0],{109:function(e,t,a){e.exports=a(135)},114:function(e,t,a){},115:function(e,t,a){},135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),o=a.n(i),l=(a(114),a(55)),s=a(93),c=a(166),u=(a(115),a(94)),p=a(19),d=a(40),h=a(10),m=a.n(h),b=a(21),g=a(51),f=a(32),y=a(169),v=a(159),x=a(167),k=a(165),E=a(171),w=a(164);function O(e){var t=e.playlist,a=e.style,n=Object(f.a)();return t&&t.snippet?r.a.createElement(v.a,{style:Object(p.a)({},a,{display:"flex",color:n.palette.text.primary}),elevation:3},r.a.createElement(y.a,null,r.a.createElement("img",{src:t.snippet.thumbnails.default.url,alt:"thumbnail"})),r.a.createElement(y.a,{style:{paddingLeft:"1em"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Playlist Title"),r.a.createElement("td",null,t.snippet.title)),r.a.createElement("tr",null,r.a.createElement("th",null,"Channel Name"),r.a.createElement("td",null,t.snippet.channelTitle)),r.a.createElement("tr",null,r.a.createElement("th",null,"Playlist Description"),r.a.createElement("td",{style:{textOverflow:"initial"}},t.snippet.description)))))):r.a.createElement("div",{style:Object(p.a)({},a)})}var I=a(68);function j(e){for(var t,a,n=e.length,r=Object(I.a)(e);0!==n;)a=Math.floor(Math.random()*n),t=r[n-=1],r[n]=r[a],r[a]=t;return r}function P(e,t){return T.apply(this,arguments)}function T(){return(T=Object(b.a)(m.a.mark((function e(t,a){var n,r,i,o,l,s,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]&&c[2],r=new URL("https://www.googleapis.com/youtube/v3/playlists"),i="id",n&&(i+=",snippet"),r.searchParams.append("part",i),r.searchParams.append("id",t),r.searchParams.append("key",a),e.next=9,fetch(r.href,{headers:{Accept:"application/json"}});case 9:return o=e.sent,e.next=12,o.json();case 12:return l=e.sent,s=l.items.find((function(e){return e.id===t})),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return _.apply(this,arguments)}function _(){return(_=Object(b.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","Missing image link");case 2:return e.prev=2,e.next=5,fetch(t);case 5:if(200===(a=e.sent).status){e.next=8;break}return e.abrupt("return","Unable to load image");case 8:return e.next=10,a.blob();case 10:if(n=e.sent,["image/png","image/jpeg","image/gif"].includes(n.type)){e.next=15;break}return console.error(n),e.abrupt("return","This is not a link for an image");case 15:return e.abrupt("return","");case 18:return e.prev=18,e.t0=e.catch(2),e.abrupt("return","Unable to load image");case 21:case"end":return e.stop()}}),e,null,[[2,18]])})))).apply(this,arguments)}var L=a(11),V=a(88),B=a.n(V),S=a(172),Y=a(162),R=a(163),A=a(87),D=a.n(A);function z(e){var t=e.onJumpToBrb,a=e.style,n=e.open,i=e.onClose;return r.a.createElement(y.a,{style:Object(p.a)({},a)},r.a.createElement(S.a,{open:n,onClose:i},r.a.createElement(Y.a,null,"Link has been created"),r.a.createElement(R.a,null,r.a.createElement(y.a,null,"The link has been copied to your clipboard. Click the button below to go to your new BRB page."),r.a.createElement("br",null),r.a.createElement(w.a,{variant:"outlined",style:{float:"right"},onClick:t,startIcon:r.a.createElement(D.a,null)},"JUMP TO BRB"))))}function M(e){var t,a=Object(g.c)(e),n=Object(d.a)(a,2),i=n[0],o=n[1],l=Object(p.a)({},e);return l.error=!!o.error,l.helperText=null!==(t=o.error)&&void 0!==t?t:l.helperText,r.a.createElement(x.a,Object.assign({},i,l))}z.defaultProps={open:!1,onJumpToBrb:function(){}};var K=function(){var e=Object(b.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t,a,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function W(e){var t=e.YoutubeApiKey,a=Object(n.useState)({}),i=Object(d.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(!1),c=Object(d.a)(s,2),u=c[0],h=c[1],I=Object(n.useState)(""),j=Object(d.a)(I,2),P=j[0],T=j[1],_=Object(n.useState)(""),V=Object(d.a)(_,2),S=V[0],Y=V[1],R=Object(f.a)(),A=Object(L.g)(),D={display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:"100%",backgroundColor:R.palette.background.default,paddingLeft:"2em",paddingRight:"2em"},M={backgroundColor:R.palette.background.paper,color:R.palette.text.primary},W=function(){var e=Object(b.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return l({}),e.abrupt("return","Required");case 5:return e.next=7,K(a,t);case 7:if(n=e.sent){e.next=11;break}return l({}),e.abrupt("return","Invalid playlist ID");case 11:l(n);case 12:return e.abrupt("return","");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(b.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return Y(""),e.abrupt("return","");case 3:return e.next=5,C(t);case 5:if(!(a=e.sent)){e.next=9;break}return Y(""),e.abrupt("return",a);case 9:return Y(t),e.abrupt("return","");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(y.a,{style:Object(p.a)({},D)},r.a.createElement(y.a,{style:{width:"30%"}},r.a.createElement("img",{src:S,alt:"",style:{maxWidth:"100%",maxHeight:"100%",margin:"auto",width:"auto",height:"auto"}}),r.a.createElement(z,{style:{width:"30%"},onJumpToBrb:function(){P&&A.push("/BRB".concat(P))},open:u,onClose:function(){return h(!1)}})),r.a.createElement(g.b,{initialValues:{youtubeListId:"",loadingText:"",showYTControls:!1,randomizeOrder:!1,imageLink:""},onSubmit:function(e,t){var a=t.setSubmitting,n=new URL(window.location.origin);n.pathname="".concat("/youtube-playlist-brb","/BRB"),n.searchParams.append("list",e.youtubeListId),n.searchParams.append("loadingText",e.loadingText),n.searchParams.append("showYTControls",e.showYTControls?"1":"0"),n.searchParams.append("randomizeOrder",e.randomizeOrder?"1":"0"),n.searchParams.append("brbImage",e.imageLink),T(n.search),navigator.clipboard.writeText(n.href),h(!0),a(!1)},validateOnChange:!1},(function(e){return r.a.createElement(v.a,{elevation:3,style:{padding:"1em",width:"30%",minWidth:"450px",margin:"auto"}},r.a.createElement(g.a,null,r.a.createElement(G,{name:"youtubeListId",validate:W,label:"Youtube Playlist ID",helperText:"Enter a youtube playlist ID"}),r.a.createElement(G,{name:"loadingText",as:x.a,label:"Loading Text",helperText:"The text to display while loading the next video in the playlist"}),r.a.createElement(G,{name:"imageLink",validate:H,as:x.a,label:"BRB Image Link",helperText:"The image to display while loading the next video in the playlist"}),r.a.createElement(k.a,{label:"Show Youtube controls",style:Object(p.a)({},M),control:r.a.createElement(E.a,{checked:e.values.showYTControls,onChange:e.handleChange,onBlur:e.handleBlur,name:"showYTControls",disabled:e.isSubmitting,color:"primary"})}),r.a.createElement("br",null),r.a.createElement(k.a,{label:"Randomize playlist order",style:Object(p.a)({},M),control:r.a.createElement(E.a,{checked:e.values.randomizeOrder,onChange:e.handleChange,onBlur:e.handleBlur,name:"randomizeOrder",disabled:e.isSubmitting,color:"primary"})}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{type:"submit",variant:"outlined",disabled:e.isSubmitting,style:{float:"right"},startIcon:r.a.createElement(B.a,null)},"Create Link")))})),r.a.createElement(O,{playlist:o,style:{width:"30%",padding:"1em"}}))}var G=function(e){var t=e.variant,a=e.fullWidth,n=e.margin,i=Object(u.a)(e,["variant","fullWidth","margin"]);return r.a.createElement(M,Object.assign({variant:null!==t&&void 0!==t?t:"outlined",fullWidth:null===a||void 0===a||a,margin:null!==n&&void 0!==n?n:"normal"},i))},H=a(54),J=a(24),U=a(25),q=a(42),N=a(43),Q=function(){function e(t){Object(J.a)(this,e),this._apiKey=void 0,this._apiKey=t}return Object(U.a)(e,[{key:"GetPlaylistVideos",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var a,n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n="";case 2:return e.next=4,this._getPlaylistVideoPage(t,n);case 4:if(!(i=e.sent).error){e.next=7;break}throw new Error(i.error.message);case 7:a.push.apply(a,Object(I.a)(i.items)),n=null!==(r=i.nextPageToken)&&void 0!==r?r:"";case 9:if(""!==n){e.next=2;break}case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetPlaylistVideoIds",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.GetPlaylistVideos(t);case 2:return a=e.sent,e.abrupt("return",a.map((function(e){var t,a;return null!==(t=null===(a=e.contentDetails)||void 0===a?void 0:a.videoId)&&void 0!==t?t:""})).filter((function(e){return""!==e})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPlaylistVideoPage",value:function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URL("https://www.googleapis.com/youtube/v3/playlistItems")).searchParams.append("part","contentDetails"),n.searchParams.append("playlistId",t),n.searchParams.append("key",this._apiKey),n.searchParams.append("maxResults","50"),a&&n.searchParams.append("pageToken",a),e.next=8,fetch(n.href,{headers:{Accept:"application/json"}});case 8:return r=e.sent,e.next=11,r.json();case 11:return i=e.sent,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),Z=a(89),F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;Object(J.a)(this,e),this._context=void 0,this._oscillator=void 0,this._gain=void 0,this._beepVolume=void 0,this._beepVolume=t,this._context=new AudioContext,this._oscillator=this._context.createOscillator(),this._oscillator.frequency.value=1e3,this._gain=this._context.createGain(),this._oscillator.connect(this._gain),this._gain.connect(this._context.destination),this._gain.gain.value=0,this._oscillator.start(0)}return Object(U.a)(e,[{key:"Beep",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;this.StartBeep(),setTimeout((function(){e.StopBeep()}),t)}},{key:"StartBeep",value:function(){this._gain.gain.value=this._beepVolume}},{key:"StopBeep",value:function(){this._gain.gain.value=0}}]),e}(),$=a(92),X=a.n($),ee=function(e){Object(N.a)(a,e);var t=Object(q.a)(a);function a(){var e;Object(J.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(U.a)(a,[{key:"render",value:function(){var e=this.props.brbImageLink?this.props.brbImageLink:X.a,t=this.props.brbImageLink?{maxWidth:"100%",maxHeight:"100%",margin:"auto",width:"auto",height:"auto"}:{width:"100%"};return r.a.createElement("div",{style:Object(p.a)({},{width:"100%",height:"100%"},{display:this.props.hidden?"none":"flex"})},r.a.createElement("img",{src:e,alt:"",style:t}),r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",fontSize:"150px",color:"white",transform:"translate(-50%,-50%)",backgroundColor:"black",textAlign:"center"}},this.props.text))}}]),a}(n.Component);ee.defaultProps={hidden:!1,text:"",brbImageLink:""};var te=function(e){Object(N.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(J.a)(this,a),(n=t.call(this,e)).state={currentVideoId:"",IsVideoPlaying:!1,IsLoadingVideo:!0},n._beeper=void 0,n._currentVideoIndex=void 0,n._beeper=new F(.1),n._currentVideoIndex=0,n}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.loadCurrentPlaylistVideo()}},{key:"onPlayerStart",value:function(){this.setState({IsVideoPlaying:!0,IsLoadingVideo:!1}),this._beeper.StopBeep()}},{key:"loadNextPlaylistVideo",value:function(){this._currentVideoIndex++,this.loadCurrentPlaylistVideo()}},{key:"loadCurrentPlaylistVideo",value:function(){var e={IsVideoPlaying:!1,IsLoadingVideo:!1,currentVideoId:""};this._currentVideoIndex<this.props.playlist.length&&(e.currentVideoId=this.props.playlist[this._currentVideoIndex],e.IsLoadingVideo=!0,this._beeper.StartBeep()),this.setState(e)}},{key:"render",value:function(){var e=this;if(0===this.props.playlist.length)return r.a.createElement(n.Fragment,null);var t={height:"100%",width:"100%",playerVars:{autoplay:1,controls:this.props.showYTControls?1:0,fs:0,rel:0,modestbranding:1}};return r.a.createElement("div",{style:{height:"inherit"}},r.a.createElement("div",{hidden:!this.state.IsVideoPlaying,style:{height:"inherit"}},r.a.createElement(Z.a,{containerClassName:"YTPlayerContainer",videoId:this.state.currentVideoId,opts:t,onPlay:function(){return e.onPlayerStart()},onEnd:function(){return e.loadNextPlaylistVideo()}})),r.a.createElement(ee,{hidden:!this.state.IsLoadingVideo,text:this.props.loadingText,brbImageLink:this.props.brbImageLink}))}}]),a}(n.Component);te.defaultProps={playlist:[],loadingText:"",showYTControls:!1,brbImageLink:""};var ae=function(e){Object(N.a)(a,e);var t=Object(q.a)(a);function a(e){var n,r,i,o;Object(J.a)(this,a),(o=t.call(this,e)).state={playlistId:"",playlist:[],loadingText:"",showYTControls:!1,randomizeOrder:!0,brbImageLink:""},o._playlistRetriever=void 0,o._playlistRetriever=new Q(e.YoutubeApiKey);var l=new URL(window.location.href);return o.state.playlistId=null!==(n=l.searchParams.get("list"))&&void 0!==n?n:"",o.state.loadingText=null!==(r=l.searchParams.get("loadingText"))&&void 0!==r?r:"",o.state.showYTControls="1"===l.searchParams.get("showYTControls"),o.state.randomizeOrder="1"===l.searchParams.get("randomizeOrder"),o.state.brbImageLink=null!==(i=l.searchParams.get("brbImage"))&&void 0!==i?i:"",o}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.onMount()}},{key:"onMount",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.playlistId){e.next=4;break}return alert("Missing playlist ID. \nRedirecting to configuration page."),this.props.history.push("/config"),e.abrupt("return");case 4:return e.next=6,P(this.state.playlistId,this.props.YoutubeApiKey);case 6:if(e.sent){e.next=11;break}return alert("Invalid youtube playlist ID of ".concat(this.state.playlistId,"\nRedirecting to configuration page.")),this.props.history.push("/config"),e.abrupt("return");case 11:if(t="",!this.state.brbImageLink){e.next=16;break}return e.next=15,C(this.state.brbImageLink);case 15:t=e.sent;case 16:if(!t){e.next=20;break}return alert("Invalid BRB image of ".concat(this.state.brbImageLink,"\n").concat(t,"\nRedirecting to configuration page.")),this.props.history.push("/config"),e.abrupt("return");case 20:return e.prev=20,e.next=23,this._playlistRetriever.GetPlaylistVideoIds(this.state.playlistId);case 23:a=e.sent,this.state.randomizeOrder&&(a=j(a)),this.setState({playlist:a}),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(20),console.error(e.t0);case 31:case"end":return e.stop()}}),e,this,[[20,28]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.playlist.length>0?r.a.createElement(te,{playlist:this.state.playlist,loadingText:this.state.loadingText,showYTControls:this.state.showYTControls,brbImageLink:this.state.brbImageLink}):""}}]),a}(n.Component);function ne(e){Object(l.a)(e);var t=Object(L.g)();return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},r.a.createElement("h2",{style:{textAlign:"center"}},"Page not found. Click the button to go to the configuration page."),r.a.createElement("div",null,r.a.createElement(w.a,{onClick:function(){t.push("/config")},variant:"outlined"},"Go to Configuration Page")))}var re=null!=="AIzaSyA0Qv78ZM4HhEleQnbHfKdcq7WGAiEHJDY"?"AIzaSyA0Qv78ZM4HhEleQnbHfKdcq7WGAiEHJDY":"";function ie(e){Object(l.a)(e);var t=Object(s.a)({palette:{type:"dark"}});return r.a.createElement(c.a,{theme:t},r.a.createElement(H.a,{basename:"/youtube-playlist-brb"},r.a.createElement(L.d,null,r.a.createElement(L.b,{path:"/brb",render:function(e){return r.a.createElement(ae,Object.assign({YoutubeApiKey:re},e))}}),r.a.createElement(L.b,{path:"/config"},r.a.createElement(W,{YoutubeApiKey:re})),r.a.createElement(L.b,{path:"/",exact:!0},r.a.createElement(L.a,{to:"/config"})),r.a.createElement(L.b,null,r.a.createElement(ne,null)))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,t,a){e.exports=a.p+"static/media/SMPTE_Color_Bars.bba5813e.svg"}},[[109,1,2]]]);
//# sourceMappingURL=main.5fa11bc6.chunk.js.map